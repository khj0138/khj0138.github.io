---
layout: single
title:  "231218 다섯번째 포스팅"
---
# DeFerred Rendering
* 지연 렌더링, 렌더링 시점 조절이 필요한 Texture를 임시 저장 후 필요한 시점에 일괄적으로 렌더링하는 Multi Rendering 기법<br>
* Forward Rendering : Render Target Texture에 명령 즉시 렌더링하는 기법<br>

## Deferred Multi Rendering Target
* Depth Stencil View를 설정하지 않고 Texture 생성 <br>
-> 첫 번째로 Output Merget Setting <br>
-> Shader Domain 최상위 단에 Deffered Domain, Deffered Decal Domain(광원 적용 가능한 Decal) 설정 <br> 
* Diffuse Target Texture <br>
-> 색상 정보 저장(RGBA8), Render Target Flag(출력)와 Shader Resource Flag(샘플링) 설정 <br>
* Normal Target Texutre <br>
-> Normal 정보 저장(RGBA32), Render Target Flag(출력)와 Shader Resource Flag(샘플링) 설정 <br>
* Position Target Texutre <br>
-> Position 정보 저장(RGBA32), Render Target Flag(출력)와 Shader Resource Flag(샘플링) 설정 <br>
* Data Target Texutre <br>
-> Data 정보 저장(RGBA32), Render Target Flag(출력)와 Shader Resource Flag(샘플링) 설정 <br>
* Depth Texture 부재 <br>
* Render Target 4개가 설정되었으므로 Pixel Shader의 Output도 4종류의 데이터를 반환해야 함(구조체)  <br>
-> diffuse(색상), normal(pixel normal), position(ndc position), data(extra info) <br>
* SwapChain Texture보다 깊이가 낮기 때문에 Deffered Texture가 더 앞에 출력


## Multi Render Target(MRT)
* 다수의 Render Target(최대 8개)와 1개의 Depth Stencil 활용 <br>
-> 기존에는 하나의 SwapChain에 Depth Stencil Texture와 Render Target Texture를 연결하여 Render 후 Device에 Swapchain이 렌더링했음 <br>
-> RenderTargetView의 경우 이중 포인터로 Parameter 전달 <br>
-> Depth Stencil View와는 다르게 다수를 받을 수 있음 <br>
-> OMSetRenderTargets() 함수의 첫 번째 Parameter의 경우, Render Target의 개수를 전달(최대 8개) <br>
-> 기존 Blend State 이후 Output Merging되는 Render Target이 하나였으나, 다수로 변경 <br>
* Device가 아닌 Render Manager에서 관리 <br>
* MRT 세트 내 MRT들을 상황에 따라 교체 후 렌더링하여 사용할 수 있음 <br>
-> 그러나 최종적으로는 SwapChian MRT에 완성시켜서 출력함 <br>

# RenderComponent
## Decal
* 객체에 상호작용이 일어났을 때, 상호작용의 일시적으로 해당 객체에 흔적을 남기는 기법
* Cube Mesh로 고정 <br>
* Shader Domain을 별도로 설정<br>
-> MASK와 TRANSPARENT 사이<br>
-> <br>
* Decal Shader<br>
-> RS_Type: cull-front <br>
-> DS_Type: Notest-nowrite <br>
-> BS_Type: default <br>
-> Domain : Decal <br>
